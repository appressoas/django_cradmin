(function(){angular.module("djangoCradmin.acemarkdown",[]).directive("djangoCradminAcemarkdown",function(){return{restrict:"A",transclude:!0,templateUrl:"acemarkdown/acemarkdown.tpl.html",scope:{config:"=djangoCradminAcemarkdown"},controller:function($scope){this.setEditor=function(editorScope){return $scope.editor=editorScope,$scope.editor.aceEditor.on("focus",function(){return $scope.element.addClass("cradmin-focus")}),$scope.editor.aceEditor.on("blur",function(){return $scope.element.removeClass("cradmin-focus")})},this.setTextarea=function(textareaScope){return $scope.textarea=textareaScope,$scope.editor.setValue($scope.textarea.getValue())},this.setTextAreaValue=function(value){return $scope.textarea.setValue(value)},this.focusOnEditor=function(){return $scope.editor.focus()},this.editorSurroundSelectionWith=function(options){return $scope.editor.surroundSelectionWith(options)}},link:function(scope,element){var theme;return scope.element=element,scope.config.showTextarea&&element.addClass("cradmin-acemarkdown-textareavisible"),theme=scope.config.theme,theme||(theme="tomorrow"),scope.editor.setTheme(theme)}}}).directive("djangoCradminAcemarkdownEditor",function(){return{require:"^djangoCradminAcemarkdown",restrict:"A",template:"<div></div>",scope:{},controller:function($scope){$scope.setValue=function(value){return $scope.aceEditor.getSession().setValue(value)},$scope.focus=function(){return $scope.aceEditor.focus()},$scope.setTheme=function(theme){return $scope.aceEditor.setTheme("ace/theme/"+theme)},$scope.onChange=function(){var value;return value=$scope.aceEditor.getSession().getValue(),$scope.markdownCtrl.setTextAreaValue(value)},$scope.surroundSelectionWith=function(options){var emptyText,newlines,noSelection,post,pre,selectedText,selectionRange;return pre=options.pre,post=options.post,emptyText=options.emptyText,null==emptyText&&(emptyText=""),null==pre&&(pre=""),null==post&&(post=""),selectionRange=$scope.aceEditor.getSelectionRange(),selectedText=$scope.aceEditor.session.getTextRange(selectionRange),noSelection=""===selectedText,noSelection&&(selectedText=emptyText),$scope.aceEditor.insert(""+pre+selectedText+post),noSelection&&(newlines=pre.split("\n").length-1,selectionRange.start.row+=newlines,selectionRange.end.row=selectionRange.start.row,selectionRange.start.column+=pre.length-newlines,selectionRange.end.column+=pre.length-newlines+emptyText.length,$scope.aceEditor.getSelection().setSelectionRange(selectionRange)),$scope.aceEditor.focus()}},link:function(scope,element,attrs,markdownCtrl){var session;scope.markdownCtrl=markdownCtrl,scope.aceEditor=ace.edit(element[0]),scope.aceEditor.setHighlightActiveLine(!1),scope.aceEditor.setShowPrintMargin(!1),scope.aceEditor.renderer.setShowGutter(!1),session=scope.aceEditor.getSession(),session.setMode("ace/mode/markdown"),session.setUseWrapMode(!0),session.setUseSoftTabs(!0),scope.aceEditor.on("change",function(){return scope.onChange()}),markdownCtrl.setEditor(scope)}}}).directive("djangoCradminAcemarkdownTool",function(){return{require:"^djangoCradminAcemarkdown",restrict:"A",scope:{config:"=djangoCradminAcemarkdownTool"},link:function(scope,element,attr,markdownCtrl){element.on("click",function(e){return e.preventDefault(),markdownCtrl.editorSurroundSelectionWith(scope.config)})}}}).directive("djangoCradminAcemarkdownLink",["$window",function($window){return{require:"^djangoCradminAcemarkdown",restrict:"A",scope:{config:"=djangoCradminAcemarkdownLink"},link:function(scope,element,attr,markdownCtrl){element.on("click",function(e){var url;return e.preventDefault(),url=$window.prompt(scope.config.help,""),null!=url?markdownCtrl.editorSurroundSelectionWith({pre:"[",post:"]("+url+")",emptyText:scope.config.emptyText}):void 0})}}}]).directive("djangoCradminAcemarkdownTextarea",function(){return{require:"^djangoCradminAcemarkdown",restrict:"A",scope:{},controller:function($scope){$scope.getValue=function(){return $scope.textarea.val()},$scope.setValue=function(value){return $scope.getValue()!==value?$scope.textarea.val(value):void 0}},link:function(scope,element,attrs,markdownCtrl){scope.textarea=element,scope.textarea.addClass("cradmin-acemarkdowntextarea"),scope.textarea.on("focus",function(){return markdownCtrl.focusOnEditor()}),markdownCtrl.setTextarea(scope)}}})}).call(this),function(){angular.module("djangoCradmin.bulkfileupload",["angularFileUpload","ngCookies"]).factory("cradminBulkfileupload",function(){var FileInfo,FileInfoList;return FileInfo=function(){function FileInfo(options){this.file=options.file,this.temporaryfileid=options.temporaryfileid,this.name=this.file.name,this.isRemoving=!1}return FileInfo.prototype.markAsIsRemoving=function(){return this.isRemoving=!0},FileInfo.prototype.markAsIsNotRemoving=function(){return this.isRemoving=!1},FileInfo}(),FileInfoList=function(){function FileInfoList(options){var file,_i,_len,_ref;for(this.percent=options.percent,options.finished?this.finished=!0:this.finished=!1,options.hasErrors?this.hasErrors=!0:this.hasErrors=!1,this.rawFiles=options.files,this.files=[],_ref=options.files,_i=0,_len=_ref.length;_len>_i;_i++)file=_ref[_i],this.files.push(new FileInfo({temporaryfileid:null,name:file.name,file:file}));this.errors=options.errors}return FileInfoList.prototype.updatePercent=function(percent){return this.percent=percent},FileInfoList.prototype.finish=function(temporaryfiles){var index,temporaryfile,_i,_len,_results;for(this.finished=!0,index=0,_results=[],_i=0,_len=temporaryfiles.length;_len>_i;_i++)temporaryfile=temporaryfiles[_i],this.files[index].name=temporaryfile.filename,this.files[index].temporaryfileid=temporaryfile.id,_results.push(index+=1);return _results},FileInfoList.prototype.setErrors=function(errors){return this.hasErrors=!0,this.errors=errors},FileInfoList.prototype.indexOf=function(fileInfo){return this.files.indexOf(fileInfo)},FileInfoList.prototype.remove=function(index){return this.files.splice(index,1)},FileInfoList}(),{createFileInfoList:function(options){return new FileInfoList(options)}}}).directive("djangoCradminBulkfileuploadForm",[function(){return{restrict:"AE",scope:{},controller:function($scope){$scope._inProgressCounter=0,$scope._submitButtonScopes=[],$scope._setSubmitButtonsInProgress=function(){var buttonScope,_i,_len,_ref,_results;for(_ref=$scope._submitButtonScopes,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)buttonScope=_ref[_i],_results.push(buttonScope.setNotInProgress());return _results},$scope._setSubmitButtonsNotInProgress=function(){var buttonScope,_i,_len,_ref,_results;for(_ref=$scope._submitButtonScopes,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)buttonScope=_ref[_i],_results.push(buttonScope.setInProgress());return _results},this.addInProgress=function(){return $scope._inProgressCounter+=1,1===$scope._inProgressCounter?$scope._setSubmitButtonsInProgress():void 0},this.removeInProgress=function(){if(0===$scope._inProgressCounter)throw new Error("It should not be possible to get _inProgressCounter below 0");return $scope._inProgressCounter-=1,0===$scope._inProgressCounter?$scope._setSubmitButtonsNotInProgress():void 0},this.addSubmitButtonScope=function(submitButtonScope){return $scope._submitButtonScopes.push(submitButtonScope)}},link:function(scope,element,attr,uploadController){element.on("submit",function(evt){return 0!==scope._inProgressCounter?evt.preventDefault():void 0})}}}]).directive("djangoCradminBulkfileuploadSubmit",[function(){return{require:"^djangoCradminBulkfileuploadForm",restrict:"A",scope:!0,controller:function($scope){return $scope.inProgress=!1,$scope.setInProgress=function(){return $scope.element.prop("disabled",!1),$scope.inProgress=!1},$scope.setNotInProgress=function(){return $scope.element.prop("disabled",!0),$scope.inProgress=!0}},link:function(scope,element,attr,formController){scope.element=element,formController.addSubmitButtonScope(scope)}}}]).directive("djangoCradminBulkfileupload",["$upload","$cookies","cradminDetectize",function($upload,$cookies,cradminDetectize){return{require:"^djangoCradminBulkfileuploadForm",restrict:"AE",scope:!0,controller:function($scope){$scope.collectionid=null,$scope.cradminLastFilesSelectedByUser=[],$scope.fileUploadQueue=[],$scope.firstUploadInProgress=!1,$scope.simpleWidgetScope=null,$scope.advancedWidgetScope=null,$scope.rejectedFilesScope=null,this.setInProgressOrFinishedScope=function(inProgressOrFinishedScope){return $scope.inProgressOrFinishedScope=inProgressOrFinishedScope},this.setFileUploadFieldScope=function(fileUploadFieldScope){return $scope.fileUploadFieldScope=fileUploadFieldScope},this.setSimpleWidgetScope=function(simpleWidgetScope){return $scope.simpleWidgetScope=simpleWidgetScope,$scope._showAppropriateWidget()},this.setAdvancedWidgetScope=function(advancedWidgetScope){return $scope.advancedWidgetScope=advancedWidgetScope,$scope._showAppropriateWidget()},this.setRejectFilesScope=function(rejectedFilesScope){return $scope.rejectedFilesScope=rejectedFilesScope},this.getUploadUrl=function(){return $scope.uploadUrl},this.getCollectionId=function(){return $scope.collectionid},$scope._addFileInfoList=function(fileInfoList){return $scope.inProgressOrFinishedScope.addFileInfoList(fileInfoList)},$scope._showAppropriateWidget=function(){return $scope.advancedWidgetScope&&$scope.simpleWidgetScope?"desktop"===cradminDetectize.device.type?$scope.simpleWidgetScope.hide():$scope.advancedWidgetScope.hide():void 0},$scope.filesDropped=function(files,evt,rejectedFiles){return rejectedFiles.length>0?$scope.rejectedFilesScope.setRejectedFiles(rejectedFiles):void 0},$scope.$watch("cradminLastFilesSelectedByUser",function(){return $scope.cradminLastFilesSelectedByUser.length>0?($scope._addFilesToQueue($scope.cradminLastFilesSelectedByUser.slice()),$scope.cradminLastFilesSelectedByUser=[]):void 0}),$scope._addFilesToQueue=function(files){var progressInfo;return progressInfo=$scope.inProgressOrFinishedScope.addFileInfoList({percent:0,files:files}),$scope.fileUploadQueue.push(progressInfo),$scope.firstUploadInProgress?void 0:(null===$scope.collectionid&&($scope.firstUploadInProgress=!0),$scope._processFileUploadQueue())},$scope._onFileUploadComplete=function(){return $scope.firstUploadInProgress=!1,$scope.formController.removeInProgress(),$scope.fileUploadQueue.length>0?$scope._processFileUploadQueue():void 0},$scope._processFileUploadQueue=function(){var apidata,progressInfo;return progressInfo=$scope.fileUploadQueue.shift(),apidata=angular.extend({},$scope.apiparameters,{collectionid:$scope.collectionid}),$scope.formController.addInProgress(),$scope.upload=$upload.upload({url:$scope.uploadUrl,method:"POST",data:apidata,file:progressInfo.rawFiles,fileFormDataName:"file",headers:{"X-CSRFToken":$cookies.get("csrftoken"),"Content-Type":"multipart/form-data"}}).progress(function(evt){return progressInfo.updatePercent(parseInt(100*evt.loaded/evt.total))}).success(function(data,status,headers,config){return progressInfo.finish(data.temporaryfiles),$scope._setCollectionId(data.collectionid),$scope._onFileUploadComplete()}).error(function(data){return progressInfo.setErrors(data),$scope._onFileUploadComplete()})},$scope._setCollectionId=function(collectionid){return $scope.collectionid=collectionid,$scope.fileUploadFieldScope.setCollectionId(collectionid)}},link:function(scope,element,attr,formController){if(scope.uploadUrl=attr.djangoCradminBulkfileupload,null!=attr.djangoCradminBulkfileuploadApiparameters){if(scope.apiparameters=scope.$parent.$eval(attr.djangoCradminBulkfileuploadApiparameters),!angular.isObject(scope.apiparameters))throw new Error("django-cradmin-bulkfileupload-apiparameters must be a javascript object.")}else scope.apiparameters={};scope.formController=formController}}}]).directive("djangoCradminBulkfileuploadRejectedFiles",[function(){return{restrict:"A",require:"^djangoCradminBulkfileupload",templateUrl:"bulkfileupload/rejectedfiles.tpl.html",transclude:!0,scope:{rejectedFileErrorMessage:"@djangoCradminBulkfileuploadRejectedFiles"},controller:function($scope){return $scope.rejectedFiles=[],$scope.setRejectedFiles=function(rejectedFiles){return $scope.rejectedFiles=rejectedFiles},$scope.closeMessage=function(rejectedFile){var index;return index=$scope.rejectedFiles.indexOf(rejectedFile),-1!==index?$scope.rejectedFiles.splice(index,1):void 0}},link:function(scope,element,attr,bulkfileuploadController){bulkfileuploadController.setRejectFilesScope(scope)}}}]).directive("djangoCradminBulkfileuploadProgress",["cradminBulkfileupload","$http","$cookies",function(cradminBulkfileupload,$http,$cookies){return{restrict:"AE",require:"^djangoCradminBulkfileupload",templateUrl:"bulkfileupload/progress.tpl.html",scope:{},controller:function($scope){$scope.fileInfoLists=[],$scope._findFileInfo=function(fileInfo){var fileInfoIndex,fileInfoList,_i,_len,_ref;if(null==fileInfo.temporaryfileid)throw new Error("Can not remove files without a temporaryfileid");for(_ref=$scope.fileInfoLists,_i=0,_len=_ref.length;_len>_i;_i++)if(fileInfoList=_ref[_i],fileInfoIndex=fileInfoList.indexOf(fileInfo),-1!==fileInfoIndex)return{fileInfoList:fileInfoList,index:fileInfoIndex};throw new Error("Could not find requested fileInfo with temporaryfileid="+fileInfo.temporaryfileid+".")},this.removeFile=function(fileInfo){var fileInfoLocation;return fileInfoLocation=$scope._findFileInfo(fileInfo),fileInfo.markAsIsRemoving(),$scope.$apply(),$http({url:$scope.uploadController.getUploadUrl(),method:"DELETE",headers:{"X-CSRFToken":$cookies.get("csrftoken")},data:{collectionid:$scope.uploadController.getCollectionId(),temporaryfileid:fileInfo.temporaryfileid}}).success(function(data,status,headers,config){return fileInfoLocation.fileInfoList.remove(fileInfoLocation.index)}).error(function(data,status,headers,config){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.error&&console.error("ERROR",data),alert("An error occurred while removing the file. Please try again."),fileInfo.markAsIsNotRemoving()})},$scope.addFileInfoList=function(options){var fileInfoList;return fileInfoList=cradminBulkfileupload.createFileInfoList(options),$scope.fileInfoLists.push(fileInfoList),console.log($scope.fileInfoLists),fileInfoList}},link:function(scope,element,attr,uploadController){scope.uploadController=uploadController,uploadController.setInProgressOrFinishedScope(scope)}}}]).directive("djangoCradminBulkFileInfoList",[function(){return{restrict:"AE",scope:{fileInfoList:"=djangoCradminBulkFileInfoList"},templateUrl:"bulkfileupload/fileinfolist.tpl.html",transclude:!0,controller:function($scope){this.close=function(){return $scope.element.remove()}},link:function(scope,element,attr){scope.element=element}}}]).directive("djangoCradminBulkfileuploadErrorCloseButton",[function(){return{restrict:"A",require:"^djangoCradminBulkFileInfoList",scope:{},link:function(scope,element,attr,fileInfoListController){element.on("click",function(evt){return evt.preventDefault(),fileInfoListController.close()})}}}]).directive("djangoCradminBulkfileuploadRemoveFileButton",[function(){return{restrict:"A",require:"^djangoCradminBulkfileuploadProgress",scope:{fileInfo:"=djangoCradminBulkfileuploadRemoveFileButton"},link:function(scope,element,attr,progressController){element.on("click",function(evt){return evt.preventDefault(),progressController.removeFile(scope.fileInfo)})}}}]).directive("djangoCradminBulkfileuploadCollectionidField",[function(){return{require:"^djangoCradminBulkfileupload",restrict:"AE",scope:{},controller:function($scope){$scope.setCollectionId=function(collectionid){return $scope.element.val(""+collectionid)}},link:function(scope,element,attr,uploadController){scope.element=element,uploadController.setFileUploadFieldScope(scope)}}}]).directive("djangoCradminBulkfileuploadAdvancedWidget",[function(){return{require:"^djangoCradminBulkfileupload",restrict:"AE",scope:{},link:function(scope,element,attr,uploadController){scope.hide=function(){return element.css("display","none")},uploadController.setAdvancedWidgetScope(scope)}}}]).directive("djangoCradminBulkfileuploadSimpleWidget",[function(){return{require:"^djangoCradminBulkfileupload",restrict:"AE",scope:{},link:function(scope,element,attr,uploadController){scope.hide=function(){return element.css("display","none")},uploadController.setSimpleWidgetScope(scope)}}}])}.call(this),function(){angular.module("djangoCradmin.collapse",[]).directive("djangoCradminCollapse",[function(){return{scope:!0,controller:function($scope){$scope.contentHidden=!0,$scope.toggleContentVisible=function(){return $scope.contentHidden=!$scope.contentHidden}},link:function($scope,$element,attrs){return $scope.contentHidden="visible"!==attrs.initialState}}}])}.call(this),function(){angular.module("djangoCradmin.directives",[]).directive("djangoCradminBack",function(){return{restrict:"A",link:function(scope,element,attrs){element.on("click",function(){return history.back(),scope.$apply()})}}}).directive("djangoCradminFormAction",function(){return{restrict:"A",scope:{value:"=djangoCradminFormAction"},controller:function($scope){$scope.$watch("value",function(newValue){return $scope.element.attr("action",newValue)})},link:function(scope,element,attrs){scope.element=element}}}).directive("djangoCradminSelectTextForCopyOnFocus",function(){return{restrict:"A",scope:{valueToCopy:"@djangoCradminSelectTextForCopyOnFocus"},link:function(scope,element,attrs){scope.value=attrs.value,element.on("click",function(){return element.val(scope.valueToCopy),this.select()}),scope.resetValue=function(){return element.val(scope.value)},element.on("change",function(){return scope.resetValue()}),element.on("blur",function(){return scope.resetValue()})}}}).directive("focusonme",["$timeout",function($timeout){return{restrict:"A",link:function($scope,$element){$timeout(function(){$element[0].focus()})}}}])}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}};angular.module("djangoCradmin.providers",[]).provider("djangoCradminWindowDimensions",function(){var WindowDimensionsProvider;return WindowDimensionsProvider=function(){function WindowDimensionsProvider($window,timeout){this.timeout=timeout,this._onWindowResize=__bind(this._onWindowResize,this),this.mainWindow=angular.element($window),this.deviceMinWidths={tablet:768,mediumDesktop:992,largeDesktop:1200},this.windowDimensions=this._getWindowDimensions(),this.applyResizeTimer=null,this.applyResizeTimerTimeoutMs=300,this.listeningScopes=[]}return WindowDimensionsProvider.prototype.triggerResizeEventsForScope=function(scope){return scope.onWindowResize(this.windowDimensions)},WindowDimensionsProvider.prototype.register=function(scope){var scopeIndex;return scopeIndex=this.listeningScopes.indexOf(scope),-1!==scopeIndex?void console.error("Trying to register a scope that is already registered with djangoCradminWindowDimensions. Scope:",scope):(this.listeningScopes.length<1&&this.mainWindow.bind("resize",this._onWindowResize),this.listeningScopes.push(scope))},WindowDimensionsProvider.prototype.unregister=function(scope){var scopeIndex;return scopeIndex=this.listeningScopes.indexOf(scope),-1===scopeIndex&&console.error("Trying to unregister a scope that is not registered with djangoCradminWindowDimensions. Scope:",scope),this.listeningScopes.splice(scopeIndex,1),this.listeningScopes.length<1?this.mainWindow.unbind("resize",this._onWindowResize):void 0},WindowDimensionsProvider.prototype._getWindowDimensions=function(){return{height:this.mainWindow.height(),width:this.mainWindow.width()}},WindowDimensionsProvider.prototype.getDeviceFromWindowDimensions=function(windowDimensions){return windowDimensions<this.deviceMinWidths.tablet?"phone":windowDimensions<this.deviceMinWidths.mediumDesktop?"tablet":windowDimensions<this.deviceMinWidths.largeDesktop?"medium-desktop":"large-desktop"},WindowDimensionsProvider.prototype._updateWindowDimensions=function(newWindowDimensions){return this.windowDimensions=newWindowDimensions,this._onWindowDimensionsChange()},WindowDimensionsProvider.prototype._setWindowDimensions=function(){var newWindowDimensions;return newWindowDimensions=this._getWindowDimensions(),angular.equals(newWindowDimensions,this.windowDimensions)?void 0:this._updateWindowDimensions(newWindowDimensions)},WindowDimensionsProvider.prototype._onWindowDimensionsChange=function(){var scope,_i,_len,_ref,_results;for(_ref=this.listeningScopes,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)scope=_ref[_i],_results.push(this.triggerResizeEventsForScope(scope));return _results},WindowDimensionsProvider.prototype._onWindowResize=function(){var _this=this;return this.timeout.cancel(this.applyResizeTimer),this.applyResizeTimer=this.timeout(function(){return _this._setWindowDimensions()},this.applyResizeTimerTimeoutMs)},WindowDimensionsProvider}(),this.$get=["$window","$timeout",function($window,$timeout){return new WindowDimensionsProvider($window,$timeout)}],this}).provider("djangoCradminWindowScrollTop",function(){var WindowScrollProvider;return WindowScrollProvider=function(){function WindowScrollProvider($window,timeout){this.timeout=timeout,this._onScroll=__bind(this._onScroll,this),this.mainWindow=angular.element($window),this.scrollTopPosition=this._getScrollTopPosition(),this.applyScrollTimer=null,this.applyScrollTimerTimeoutMs=5,this.listeningScopes=[]}return WindowScrollProvider.prototype.register=function(scope){var scopeIndex;return scopeIndex=this.listeningScopes.indexOf(scope),-1!==scopeIndex?void console.error("Trying to register a scope that is already registered with djangoCradminWindowScrollTop. Scope:",scope):(this.listeningScopes.length<1&&this.mainWindow.bind("scroll",this._onScroll),this.listeningScopes.push(scope),scope.onWindowScrollTop(this.scrollTopPosition))},WindowScrollProvider.prototype.unregister=function(scope){var scopeIndex;return scopeIndex=this.listeningScopes.indexOf(scope),-1===scopeIndex&&console.error("Trying to unregister a scope that is not registered with djangoCradminWindowScrollTop. Scope:",scope),this.listeningScopes.splice(scopeIndex,1),this.listeningScopes.length<1?this.mainWindow.unbind("scroll",this._onScroll):void 0},WindowScrollProvider.prototype._getScrollTopPosition=function(){return this.mainWindow.scrollTop()},WindowScrollProvider.prototype._setScrollTopPosition=function(){var scrollTopPosition;return scrollTopPosition=this._getScrollTopPosition(),scrollTopPosition!==this.scrollTopPosition?(this.scrollTopPosition=scrollTopPosition,this._onScrollTopChange()):void 0},WindowScrollProvider.prototype._onScrollTopChange=function(){var scope,_i,_len,_ref,_results;for(_ref=this.listeningScopes,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)scope=_ref[_i],_results.push(scope.onWindowScrollTop(this.scrollTopPosition));return _results},WindowScrollProvider.prototype._onScroll=function(){var _this=this;return this.timeout.cancel(this.applyScrollTimer),this.applyScrollTimer=this.timeout(function(){return _this._setScrollTopPosition()},this.applyScrollTimerTimeoutMs)},WindowScrollProvider}(),this.$get=["$window","$timeout",function($window,$timeout){return new WindowScrollProvider($window,$timeout)}],this})}.call(this),function(){angular.module("djangoCradmin.detectizr",[]).factory("cradminDetectize",function(){return Detectizr.detect({addAllFeaturesAsClass:!1,detectDevice:!0,detectDeviceModel:!0,detectScreen:!0,detectOS:!0,detectBrowser:!0,detectPlugins:!1}),Detectizr})}.call(this),function(){var app;app=angular.module("djangoCradmin.forms.datetimewidget",["ui.bootstrap"]),app.controller("CradminDateFieldController",function($scope,$filter){$scope.init=function(){$scope.datepicker_is_open=!1},$scope.open_datepicker=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.datepicker_is_open=!0},$scope.set_date_from_string=function(datestr){datestr&&($scope.datevalue=new Date(datestr),$scope.datefield_changed())},$scope.datefield_changed=function(){var datestr;datestr=$filter("date")($scope.datevalue,"yyyy-MM-dd"),$scope.hiddendatefieldvalue=datestr},$scope.init()}),app.controller("CradminTimeFieldController",function($scope,$filter){return $scope.set_time_from_string=function(timestr){timestr?$scope.timevalue=new Date(timestr):$scope.timevalue=new Date,$scope.timefield_changed()},$scope.timefield_changed=function(){var timestr;timestr=$filter("date")($scope.timevalue,"HH:mm"),$scope.hiddentimefieldvalue=timestr}})}.call(this),function(){var app;app=angular.module("djangoCradmin.forms.filewidget",[]),app.controller("CradminFileFieldController",function($scope,$filter){$scope.init=function(){$scope.$watch("cradmin_filefield_has_value",function(newValue){return null!=newValue?newValue?$scope.cradmin_filefield_clearcheckbox_value="":$scope.cradmin_filefield_clearcheckbox_value="checked":void 0})},$scope.cradminClearFileField=function(){return $scope.cradmin_filefield_clear_value=!0},$scope.init()}),app.directive("cradminFilefieldValue",function(){return{scope:!1,link:function($scope,element,attributes){var fileFieldElement,setupFileFieldChangeListener;$scope.cradmin_filefield_clear_value=!1,fileFieldElement=element,null!=attributes.cradminFilefieldValue&&""!==attributes.cradminFilefieldValue&&($scope.cradmin_filefield_has_value=!0,$scope.cradmin_filefield_has_original_value=!0),setupFileFieldChangeListener=function(){return fileFieldElement.bind("change",function(changeEvent){var reader;reader=new FileReader,reader.onload=function(loadEvent){$scope.$apply(function(){$scope.cradmin_filefield_has_value=!0,$scope.cradmin_filefield_has_original_value=!1})},reader.readAsDataURL(changeEvent.target.files[0])})},$scope.$watch("cradmin_filefield_clear_value",function(newValue){var newFileFieldElement;return newValue?($scope.cradmin_filefield_has_value=!1,$scope.cradmin_filefield_clear_value=!1,$scope.cradmin_filefield_has_original_value=!1,newFileFieldElement=fileFieldElement.clone(),jQuery(fileFieldElement).replaceWith(newFileFieldElement),fileFieldElement=newFileFieldElement,setupFileFieldChangeListener()):void 0}),setupFileFieldChangeListener()}}})}.call(this),function(){angular.module("djangoCradmin.forms.modelchoicefield",[]).provider("djangoCradminModelChoiceFieldCoordinator",function(){var ModelChoiceFieldOverlay;return ModelChoiceFieldOverlay=function(){function ModelChoiceFieldOverlay(){this.modelChoiceFieldIframeWrapper=null,this.bodyContentWrapperElement=angular.element("#django_cradmin_bodycontentwrapper"),this.bodyElement=angular.element("body")}return ModelChoiceFieldOverlay.prototype.registerModeChoiceFieldIframeWrapper=function(modelChoiceFieldIframeWrapper){return this.modelChoiceFieldIframeWrapper=modelChoiceFieldIframeWrapper},ModelChoiceFieldOverlay.prototype.onChangeValueBegin=function(fieldWrapperScope){return this.modelChoiceFieldIframeWrapper.onChangeValueBegin(fieldWrapperScope)},ModelChoiceFieldOverlay.prototype.addBodyContentWrapperClass=function(cssclass){return this.bodyContentWrapperElement.addClass(cssclass)},ModelChoiceFieldOverlay.prototype.removeBodyContentWrapperClass=function(cssclass){return this.bodyContentWrapperElement.removeClass(cssclass)},ModelChoiceFieldOverlay.prototype.disableBodyScrolling=function(){return this.bodyElement.addClass("django-cradmin-noscroll")},ModelChoiceFieldOverlay.prototype.enableBodyScrolling=function(){return this.bodyElement.removeClass("django-cradmin-noscroll")},ModelChoiceFieldOverlay}(),this.$get=function(){return new ModelChoiceFieldOverlay},this}).directive("djangoCradminModelChoiceFieldIframeWrapper",["$window","$timeout","djangoCradminModelChoiceFieldCoordinator",function($window,$timeout,djangoCradminModelChoiceFieldCoordinator){return{restrict:"A",scope:{},controller:function($scope){$scope.origin=""+window.location.protocol+"//"+window.location.host,$scope.mainWindow=angular.element($window),$scope.bodyElement=angular.element($window.document.body),$scope.windowDimensions=null,djangoCradminModelChoiceFieldCoordinator.registerModeChoiceFieldIframeWrapper(this),this.setIframe=function(iframeScope){return $scope.iframeScope=iframeScope},this._setField=function(fieldScope){return $scope.fieldScope=fieldScope},this._setPreviewElement=function(previewElementScope){return $scope.previewElementScope=previewElementScope},this.setLoadSpinner=function(loadSpinnerScope){return $scope.loadSpinnerScope=loadSpinnerScope},this.setIframeWrapperInner=function(iframeInnerScope){return $scope.iframeInnerScope=iframeInnerScope},this.onChangeValueBegin=function(fieldWrapperScope){return this._setField(fieldWrapperScope.fieldScope),this._setPreviewElement(fieldWrapperScope.previewElementScope),djangoCradminModelChoiceFieldCoordinator.addBodyContentWrapperClass("django-cradmin-floating-fullsize-iframe-bodycontentwrapper"),$scope.iframeScope.beforeShowingIframe(fieldWrapperScope.iframeSrc),$scope.mainWindow.bind("resize",$scope.onWindowResize),$scope.show()},this.onIframeLoadBegin=function(){return $scope.loadSpinnerScope.show()},this.onIframeLoaded=function(){return $scope.iframeInnerScope.show(),$scope.loadSpinnerScope.hide()},$scope.onChangeValue=function(event){var data;return event.origin!==$scope.origin?void console.error("Message origin '"+event.origin+"' does not match current origin '"+$scope.origin+"'."):(data=angular.fromJson(event.data),$scope.fieldScope.fieldid===data.fieldid?($scope.fieldScope.setValue(data.value),$scope.previewElementScope.setPreviewHtml(data.preview),$scope.mainWindow.unbind("resize",$scope.onWindowResize),djangoCradminModelChoiceFieldCoordinator.removeBodyContentWrapperClass("django-cradmin-floating-fullsize-iframe-bodycontentwrapper"),$scope.hide(),$scope.iframeScope.afterFieldValueChange()):void 0)},$window.addEventListener("message",$scope.onChangeValue,!1),$scope.getWindowDimensions=function(){return{height:$scope.mainWindow.height(),width:$scope.mainWindow.width()}},$scope.$watch("windowDimensions",function(newSize,oldSize){$scope.iframeScope.setIframeSize()},!0),$scope.onWindowResize=function(){$timeout.cancel($scope.applyResizeTimer),$scope.applyResizeTimer=$timeout(function(){return $scope.windowDimensions=$scope.getWindowDimensions(),$scope.$apply()},300)},$scope.show=function(){return $scope.iframeWrapperElement.addClass("django-cradmin-floating-fullsize-iframe-wrapper-show"),djangoCradminModelChoiceFieldCoordinator.disableBodyScrolling(),djangoCradminModelChoiceFieldCoordinator.addBodyContentWrapperClass("django-cradmin-floating-fullsize-iframe-bodycontentwrapper-push")},$scope.hide=function(){return $scope.iframeWrapperElement.removeClass("django-cradmin-floating-fullsize-iframe-wrapper-show"),djangoCradminModelChoiceFieldCoordinator.enableBodyScrolling(),djangoCradminModelChoiceFieldCoordinator.removeBodyContentWrapperClass("django-cradmin-floating-fullsize-iframe-bodycontentwrapper-push")},this.closeIframe=function(){return $scope.hide()}},link:function(scope,element,attrs,wrapperCtrl){scope.iframeWrapperElement=element}}}]).directive("djangoCradminModelChoiceFieldIframeWrapperInner",["$window",function($window){return{require:"^^djangoCradminModelChoiceFieldIframeWrapper",restrict:"A",scope:{},controller:function($scope){$scope.scrollToTop=function(){return $scope.element.scrollTop(0)},$scope.show=function(){return $scope.element.removeClass("ng-hide")},$scope.hide=function(){return $scope.element.addClass("ng-hide")}},link:function(scope,element,attrs,wrapperCtrl){scope.element=element,wrapperCtrl.setIframeWrapperInner(scope)}}}]).directive("djangoCradminModelChoiceFieldIframeClosebutton",function(){return{require:"^djangoCradminModelChoiceFieldIframeWrapper",restrict:"A",scope:{},link:function(scope,element,attrs,iframeWrapperCtrl){element.on("click",function(e){return e.preventDefault(),iframeWrapperCtrl.closeIframe()})}}}).directive("djangoCradminModelChoiceFieldLoadSpinner",function(){return{require:"^^djangoCradminModelChoiceFieldIframeWrapper",restrict:"A",scope:{},controller:function($scope){return $scope.hide=function(){return $scope.element.addClass("ng-hide");
},$scope.show=function(){return $scope.element.removeClass("ng-hide")}},link:function(scope,element,attrs,wrapperCtrl){scope.element=element,wrapperCtrl.setLoadSpinner(scope)}}}).directive("djangoCradminModelChoiceFieldIframe",function(){return{require:"^djangoCradminModelChoiceFieldIframeWrapper",restrict:"A",scope:{},controller:function($scope){return $scope.afterFieldValueChange=function(){},$scope.beforeShowingIframe=function(iframeSrc){var currentSrc;return currentSrc=$scope.element.attr("src"),null==currentSrc||""===currentSrc||currentSrc!==iframeSrc?($scope.loadedSrc=currentSrc,$scope.wrapperCtrl.onIframeLoadBegin(),$scope.resetIframeSize(),$scope.element.attr("src",iframeSrc)):void 0},$scope.setIframeSize=function(){var iframeBodyHeight,iframeDocument,iframeWindow;return iframeWindow=$scope.element.contents(),iframeDocument=iframeWindow[0],null!=iframeDocument?(iframeBodyHeight=iframeDocument.body.offsetHeight,$scope.element.height(iframeBodyHeight+60)):void 0},$scope.resetIframeSize=function(){return $scope.element.height("40px")}},link:function(scope,element,attrs,wrapperCtrl){scope.element=element,scope.wrapperCtrl=wrapperCtrl,wrapperCtrl.setIframe(scope),scope.element.on("load",function(){return wrapperCtrl.onIframeLoaded(),scope.setIframeSize()})}}}).directive("djangoCradminModelChoiceFieldWrapper",["djangoCradminModelChoiceFieldCoordinator",function(djangoCradminModelChoiceFieldCoordinator){return{restrict:"A",scope:{iframeSrc:"@djangoCradminModelChoiceFieldWrapper"},controller:function($scope){this.setField=function(fieldScope){return $scope.fieldScope=fieldScope},this.setPreviewElement=function(previewElementScope){return $scope.previewElementScope=previewElementScope},this.onChangeValueBegin=function(){return djangoCradminModelChoiceFieldCoordinator.onChangeValueBegin($scope)}}}}]).directive("djangoCradminModelChoiceFieldInput",["djangoCradminModelChoiceFieldCoordinator",function(djangoCradminModelChoiceFieldCoordinator){return{require:"^^djangoCradminModelChoiceFieldWrapper",restrict:"A",scope:{},controller:function($scope){$scope.setValue=function(value){return $scope.inputElement.val(value)}},link:function(scope,element,attrs,wrapperCtrl){scope.inputElement=element,scope.fieldid=attrs.id,wrapperCtrl.setField(scope)}}}]).directive("djangoCradminModelChoiceFieldPreview",["djangoCradminModelChoiceFieldCoordinator",function(djangoCradminModelChoiceFieldCoordinator){return{require:"^^djangoCradminModelChoiceFieldWrapper",restrict:"A",scope:{},controller:function($scope){$scope.setPreviewHtml=function(previewHtml){return $scope.previewElement.html(previewHtml)}},link:function(scope,element,attrs,wrapperCtrl){scope.previewElement=element,wrapperCtrl.setPreviewElement(scope)}}}]).directive("djangoCradminModelChoiceFieldChangebeginButton",["djangoCradminModelChoiceFieldCoordinator",function(djangoCradminModelChoiceFieldCoordinator){return{require:"^^djangoCradminModelChoiceFieldWrapper",restrict:"A",scope:{},link:function(scope,element,attrs,wrapperCtrl){element.on("click",function(e){return e.preventDefault(),wrapperCtrl.onChangeValueBegin()})}}}])}.call(this),function(){angular.module("djangoCradmin.forms.usethisbutton",[]).directive("djangoCradminUseThis",["$window",function($window){return{restrict:"A",scope:{data:"@djangoCradminUseThis"},link:function(scope,element,attrs){element.on("click",function(e){var data;return e.preventDefault(),data=angular.fromJson(scope.data),data.postmessageid="django-cradmin-use-this",$window.parent.postMessage(angular.toJson(data),window.parent.location.href)})}}}]).directive("djangoCradminUseThisHidden",["$window",function($window){return{restrict:"A",scope:{data:"@djangoCradminUseThisHidden"},link:function(scope,element,attrs){var data;data=angular.fromJson(scope.data),data.postmessageid="django-cradmin-use-this",$window.parent.postMessage(angular.toJson(data),window.parent.location.href)}}}])}.call(this),function(){angular.module("djangoCradmin.imagepreview",[]).directive("djangoCradminImagePreview",function(){var controller;return controller=function($scope){this.setImg=function(imgscope){return $scope.cradminImagePreviewImage=imgscope},this.previewFile=function(file){return $scope.cradminImagePreviewImage.previewFile(file)}},{restrict:"A",controller:controller}}).directive("djangoCradminImagePreviewImg",function(){var controller,link,onFilePreviewLoaded;return onFilePreviewLoaded=function($scope,srcData){return $scope.element.attr("height",""),$scope.element[0].src=srcData,$scope.element.removeClass("ng-hide")},controller=function($scope){$scope.previewFile=function(file){var reader;return reader=new FileReader,reader.onload=function(evt){return onFilePreviewLoaded($scope,evt.target.result)},reader.readAsDataURL(file)}},link=function($scope,element,attrs,previewCtrl){$scope.element=element,previewCtrl.setImg($scope),(null==element.attr("src")||""===element.attr("src"))&&element.addClass("ng-hide")},{require:"^djangoCradminImagePreview",restrict:"A",scope:{},controller:controller,link:link}}).directive("djangoCradminImagePreviewFilefield",function(){var link;return link=function($scope,element,attrs,previewCtrl){$scope.previewCtrl=previewCtrl,$scope.element=element,$scope.wrapperelement=element.parent(),element.bind("change",function(evt){var file;return null!=evt.target.files?(file=evt.target.files[0],$scope.previewCtrl.previewFile(file)):void 0}),element.bind("mouseover",function(){return $scope.wrapperelement.addClass("django-cradmin-filewidget-field-and-overlay-wrapper-hover")}),element.bind("mouseleave",function(){return $scope.wrapperelement.removeClass("django-cradmin-filewidget-field-and-overlay-wrapper-hover")})},{require:"^djangoCradminImagePreview",restrict:"A",scope:{},link:link}})}.call(this),function(){angular.module("djangoCradmin.iosaddtohomescreen",[]).directive("iosAddToHomeScreen",["$window","cradminDetectize",function($window,cradminDetectize){return{transclude:!0,template:"<div ng-transclude>This is my directive content</div>",link:function($scope,$element,attrs){null!=attrs.forceOs?$scope.os=attrs.forceOs:$scope.os=cradminDetectize.os.name,null!=attrs.forceBrowser?$scope.browser=attrs.forceBrowser:$scope.browser=cradminDetectize.browser.name,null!=attrs.forceDeviceModel?$scope.deviceModel=attrs.forceDeviceModel:$scope.deviceModel=cradminDetectize.device.model,console.log("Detected os:",$scope.os),console.log("Detected browser:",$scope.browser),console.log("Detected deviceModel:",$scope.deviceModel),console.log($window.navigator.standalone),"ios"===$scope.os&&"safari"===$scope.browser?$element.show():$element.hide()}}}])}.call(this),function(){angular.module("djangoCradmin",["djangoCradmin.templates","djangoCradmin.directives","djangoCradmin.providers","djangoCradmin.messages","djangoCradmin.detectizr","djangoCradmin.menu","djangoCradmin.objecttable","djangoCradmin.acemarkdown","djangoCradmin.bulkfileupload","djangoCradmin.iosaddtohomescreen","djangoCradmin.imagepreview","djangoCradmin.collapse","djangoCradmin.modal","djangoCradmin.scrollfixed","djangoCradmin.pagepreview","djangoCradmin.forms.modelchoicefield","djangoCradmin.forms.usethisbutton","djangoCradmin.forms.datetimewidget","djangoCradmin.forms.filewidget"])}.call(this),function(){angular.module("djangoCradmin.menu",[]).directive("djangoCradminMenu",[function(){return{scope:!0,controller:function($scope,djangoCradminPagePreview){$scope.cradminMenuDisplay=!1,$scope.cradminMenuTogglePressed=function(){return $scope.cradminMenuDisplay=!$scope.cradminMenuDisplay},$scope.getAriaPressed=function(){return $scope.cradminMenuDisplay?"pressed":""},this.close=function(){return $scope.cradminMenuDisplay=!1,$scope.$apply()}}}}]).directive("djangoCradminMenuAutodetectOverflowY",["djangoCradminWindowDimensions",function(djangoCradminWindowDimensions){return{require:"?djangoCradminMenu",controller:function($scope){$scope.onWindowResize=function(newWindowDimensions){return $scope.setOrUnsetOverflowYClass()},$scope.setOrUnsetOverflowYClass=function(){var menuDomElement,_ref;return menuDomElement=null!=(_ref=$scope.menuElement)?_ref[0]:void 0,null!=menuDomElement?menuDomElement.clientHeight<menuDomElement.scrollHeight?$scope.menuElement.addClass($scope.overflowYClass):$scope.menuElement.removeClass($scope.overflowYClass):void 0}},link:function($scope,element,attrs){$scope.overflowYClass=attrs.djangoCradminMenuAutodetectOverflowY,$scope.menuElement=element,djangoCradminWindowDimensions.register($scope),$scope.$on("$destroy",function(){return djangoCradminWindowDimensions.unregister($scope)})}}}]).directive("djangoCradminMenuCloseOnClick",[function(){return{require:"^^djangoCradminMenu",link:function(scope,element,attrs,djangoCradminMenuCtrl){element.on("click",function(){djangoCradminMenuCtrl.close()})}}}])}.call(this),function(){angular.module("djangoCradmin.messages",[]).controller("DjangoCradminMessagesCtrl",["$scope","$timeout",function($scope,$timeout){$scope.loading=!0,$timeout(function(){return $scope.loading=!1},650),$scope.messageHidden={},$scope.hideMessage=function(index){return $scope.messageHidden[index]=!0},$scope.messageIsHidden=function(index){return $scope.messageHidden[index]}}])}.call(this),function(){angular.module("djangoCradmin.modal",[]).directive("djangoCradminModal",[function(){return{scope:!0,controller:function($scope){$scope.modalVisible=!1,$scope.showModal=function(){return $scope.modalVisible=!0},$scope.hideModal=function(){return $scope.modalVisible=!1}}}}])}.call(this),function(){angular.module("djangoCradmin.objecttable",[]).controller("CradminMultiselectObjectTableViewController",["$scope",function($scope){return $scope.selectAllChecked=!1,$scope.numberOfSelected=0,$scope.selectedAction=null,$scope.setCheckboxValue=function(itemkey,value){return $scope.items[itemkey]=value},$scope.getCheckboxValue=function(itemkey){return $scope.items[itemkey]},$scope.toggleAllCheckboxes=function(){return $scope.selectAllChecked=!$scope.selectAllChecked,$scope.numberOfSelected=0,angular.forEach($scope.items,function(checked,itemkey){return $scope.setCheckboxValue(itemkey,$scope.selectAllChecked),$scope.selectAllChecked?$scope.numberOfSelected+=1:void 0})},$scope.toggleCheckbox=function(itemkey){var newvalue;return newvalue=!$scope.getCheckboxValue(itemkey),$scope.setCheckboxValue(itemkey,newvalue),newvalue?$scope.numberOfSelected+=1:($scope.numberOfSelected-=1,$scope.selectAllChecked=!1)}}])}.call(this),function(){angular.module("djangoCradmin.pagepreview",[]).provider("djangoCradminPagePreview",function(){var PagePreview;return PagePreview=function(){function PagePreview(){this.pagePreviewWrapper=null,this.bodyContentWrapperElement=angular.element("#django_cradmin_bodycontentwrapper"),this.bodyElement=angular.element("body")}return PagePreview.prototype.registerPagePreviewWrapper=function(pagePreviewWrapper){return this.pagePreviewWrapper=pagePreviewWrapper},PagePreview.prototype.setPreviewConfig=function(previewConfig){return this.pagePreviewWrapper.setPreviewConfig(previewConfig)},PagePreview.prototype.addBodyContentWrapperClass=function(cssclass){return this.bodyContentWrapperElement.addClass(cssclass)},PagePreview.prototype.removeBodyContentWrapperClass=function(cssclass){return this.bodyContentWrapperElement.removeClass(cssclass)},PagePreview.prototype.disableBodyScrolling=function(){return this.bodyElement.addClass("django-cradmin-noscroll")},PagePreview.prototype.enableBodyScrolling=function(){return this.bodyElement.removeClass("django-cradmin-noscroll")},PagePreview}(),this.$get=function(){return new PagePreview},this}).directive("djangoCradminPagePreviewWrapper",["$window","$timeout","djangoCradminPagePreview",function($window,$timeout,djangoCradminPagePreview){return{restrict:"A",scope:{},controller:function($scope,djangoCradminPagePreview){var previewConfigWaitingForStartup;djangoCradminPagePreview.registerPagePreviewWrapper(this),$scope.origin=""+window.location.protocol+"//"+window.location.host,$scope.mainWindow=angular.element($window),$scope.windowDimensions=null,previewConfigWaitingForStartup=null,this.setIframeWrapper=function(iframeWrapperScope){return $scope.iframeWrapperScope=iframeWrapperScope,this._readyCheck()},this.setIframe=function(iframeScope){return $scope.iframeScope=iframeScope,this._readyCheck()},this.setNavbar=function(navbarScope){return $scope.navbarScope=navbarScope,this._readyCheck()},this.setLoadSpinner=function(loadSpinnerScope){return $scope.loadSpinnerScope=loadSpinnerScope,this._readyCheck()},this.setIframeWrapperInner=function(iframeInnerScope){return $scope.iframeInnerScope=iframeInnerScope},this.showNavbar=function(){return $scope.iframeWrapperScope.showNavbar()},this.setUrl=function(url){return $scope.loadSpinnerScope.show(),$scope.iframeInnerScope.scrollToTop(),$scope.iframeScope.setUrl(url)},this._readyCheck=function(){var isReady;return isReady=null!=$scope.iframeInnerScope&&null!=$scope.loadSpinnerScope&&null!=$scope.navbarScope&&null!=$scope.iframeScope&&null!=$scope.iframeWrapperScope,isReady?this._onReady():void 0},this._onReady=function(){return null!=previewConfigWaitingForStartup?this._applyPreviewConfig():void 0},this._applyPreviewConfig=function(){var url;return url=previewConfigWaitingForStartup.urls[0].url,$scope.navbarScope.setConfig(previewConfigWaitingForStartup),$scope.iframeInnerScope.hide(),previewConfigWaitingForStartup=null,this.showPreview(),this.setUrl(url)},this.setPreviewConfig=function(previewConfig){return previewConfigWaitingForStartup=previewConfig,this._readyCheck()},this.showPreview=function(){return djangoCradminPagePreview.addBodyContentWrapperClass("django-cradmin-floating-fullsize-iframe-bodycontentwrapper"),$scope.iframeWrapperScope.show(),$scope.mainWindow.bind("resize",$scope.onWindowResize)},this.hidePreview=function(){return $scope.iframeWrapperScope.hide(),$scope.mainWindow.unbind("resize",$scope.onWindowResize),djangoCradminPagePreview.removeBodyContentWrapperClass("django-cradmin-floating-fullsize-iframe-bodycontentwrapper")},this.onIframeLoaded=function(){return $scope.iframeInnerScope.show(),$scope.loadSpinnerScope.hide()},$scope.getWindowDimensions=function(){return{height:$scope.mainWindow.height(),width:$scope.mainWindow.width()}},$scope.$watch("windowDimensions",function(newSize,oldSize){$scope.iframeScope.setIframeSize()},!0),$scope.onWindowResize=function(){$timeout.cancel($scope.applyResizeTimer),$scope.applyResizeTimer=$timeout(function(){return $scope.windowDimensions=$scope.getWindowDimensions(),$scope.$apply()},300)}},link:function(scope,element){}}}]).directive("djangoCradminPagePreviewIframeWrapper",["$window","djangoCradminPagePreview",function($window,djangoCradminPagePreview){return{require:"^^djangoCradminPagePreviewWrapper",restrict:"A",scope:{},controller:function($scope){$scope.show=function(){return $scope.iframeWrapperElement.addClass("django-cradmin-floating-fullsize-iframe-wrapper-show"),djangoCradminPagePreview.disableBodyScrolling(),djangoCradminPagePreview.addBodyContentWrapperClass("django-cradmin-floating-fullsize-iframe-bodycontentwrapper-push")},$scope.hide=function(){return $scope.iframeWrapperElement.removeClass("django-cradmin-floating-fullsize-iframe-wrapper-show"),djangoCradminPagePreview.enableBodyScrolling(),djangoCradminPagePreview.removeBodyContentWrapperClass("django-cradmin-floating-fullsize-iframe-bodycontentwrapper-push")},$scope.showNavbar=function(){return $scope.iframeWrapperElement.addClass("django-cradmin-floating-fullsize-iframe-wrapper-with-navbar")},$scope.scrollToTop=function(){return $scope.iframeWrapperElement.scrollTop(0)},this.hide=function(){return $scope.hide()},this.show=function(){return $scope.show()}},link:function(scope,element,attrs,wrapperCtrl){scope.iframeWrapperElement=element,wrapperCtrl.setIframeWrapper(scope)}}}]).directive("djangoCradminPagePreviewIframeWrapperInner",["$window",function($window){return{require:"^^djangoCradminPagePreviewWrapper",restrict:"A",scope:{},controller:function($scope){$scope.scrollToTop=function(){return $scope.element.scrollTop(0)},$scope.show=function(){return $scope.element.removeClass("ng-hide")},$scope.hide=function(){return $scope.element.addClass("ng-hide")}},link:function(scope,element,attrs,wrapperCtrl){scope.element=element,wrapperCtrl.setIframeWrapperInner(scope)}}}]).directive("djangoCradminPagePreviewIframeClosebutton",function(){return{require:"^^djangoCradminPagePreviewWrapper",restrict:"A",scope:{},link:function(scope,element,attrs,wrapperCtrl){element.on("click",function(e){return e.preventDefault(),wrapperCtrl.hidePreview()})}}}).directive("djangoCradminPagePreviewLoadSpinner",function(){return{require:"^^djangoCradminPagePreviewWrapper",restrict:"A",scope:{},controller:function($scope){return $scope.hide=function(){return $scope.element.addClass("ng-hide")},$scope.show=function(){return $scope.element.removeClass("ng-hide")}},link:function(scope,element,attrs,wrapperCtrl){scope.element=element,wrapperCtrl.setLoadSpinner(scope)}}}).directive("djangoCradminPagePreviewNavbar",function(){return{require:"^^djangoCradminPagePreviewWrapper",restrict:"A",scope:{mobileMenuHeader:"@djangoCradminPagePreviewNavbarMobileMenuHeader"},templateUrl:"pagepreview/navbar.tpl.html",controller:function($scope){return $scope.activeIndex=0,$scope.activeUrlConfig=null,$scope.setConfig=function(previewConfig){return previewConfig.urls.length>1?($scope.previewConfig=previewConfig,$scope.setActive(0),$scope.$apply(),$scope.wrapperCtrl.showNavbar()):void 0},$scope.setActive=function(index){return $scope.activeIndex=index,$scope.activeUrlConfig=$scope.previewConfig.urls[$scope.activeIndex]}},link:function($scope,element,attrs,wrapperCtrl){$scope.element=element,$scope.wrapperCtrl=wrapperCtrl,$scope.wrapperCtrl.setNavbar($scope),$scope.onNavlinkClick=function(e,index){e.preventDefault(),$scope.setActive(index),$scope.wrapperCtrl.setUrl($scope.previewConfig.urls[index].url)}}}}).directive("djangoCradminPagePreviewIframe",function(){return{require:"^^djangoCradminPagePreviewWrapper",restrict:"A",scope:{},controller:function($scope){return $scope.setUrl=function(url){return $scope.element.attr("src",url),$scope.resetIframeSize()},$scope.setIframeSize=function(){var iframeBodyHeight,iframeDocument,iframeWindow;return iframeWindow=$scope.element.contents(),iframeDocument=iframeWindow[0],null!=iframeDocument?(iframeBodyHeight=iframeDocument.body.offsetHeight,$scope.element.height(iframeBodyHeight+60)):void 0},$scope.resetIframeSize=function(){return $scope.element.height("40px")}},link:function(scope,element,attrs,wrapperCtrl){scope.element=element,wrapperCtrl.setIframe(scope),scope.element.on("load",function(){return wrapperCtrl.onIframeLoaded(),scope.setIframeSize()})}}}).directive("djangoCradminPagePreviewOpenOnPageLoad",["djangoCradminPagePreview",function(djangoCradminPagePreview){return{restrict:"A",scope:{previewConfig:"=djangoCradminPagePreviewOpenOnPageLoad"},link:function(scope,element,attrs){djangoCradminPagePreview.setPreviewConfig(scope.previewConfig)}}}]).directive("djangoCradminPagePreviewOpenOnClick",["djangoCradminPagePreview",function(djangoCradminPagePreview){return{restrict:"A",scope:{previewConfig:"=djangoCradminPagePreviewOpenOnClick"},link:function(scope,element,attrs){element.on("click",function(e){return e.preventDefault(),djangoCradminPagePreview.setPreviewConfig(scope.previewConfig)})}}}])}.call(this),function(){angular.module("djangoCradmin.scrollfixed",[]).directive("djangoCradminScrollTopFixed",["djangoCradminWindowScrollTop","djangoCradminWindowDimensions",function(djangoCradminWindowScrollTop,djangoCradminWindowDimensions){return{controller:function($scope){$scope.onWindowScrollTop=function(newWindowTopPosition){var newTopPosition;return newTopPosition=newWindowTopPosition+$scope.djangoCradminScrollTopFixedInitialTopOffset,$scope.djangoCradminScrollTopFixedElement.css("top",""+newTopPosition+"px")}},link:function($scope,element,attrs){$scope.djangoCradminScrollTopFixedElement=element,$scope.djangoCradminScrollTopFixedSettings=$scope.$eval(attrs.djangoCradminScrollTopFixed),$scope.djangoCradminScrollTopFixedInitialTopOffset=parseInt(element.css("top"),10)||0,djangoCradminWindowScrollTop.register($scope),$scope.$on("$destroy",function(){return djangoCradminWindowScrollTop.unregister($scope)})}}}])}.call(this),angular.module("djangoCradmin.templates",["acemarkdown/acemarkdown.tpl.html","bulkfileupload/fileinfolist.tpl.html","bulkfileupload/progress.tpl.html","bulkfileupload/rejectedfiles.tpl.html","pagepreview/navbar.tpl.html"]),angular.module("acemarkdown/acemarkdown.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("acemarkdown/acemarkdown.tpl.html","<div ng-transclude></div>")}]),angular.module("bulkfileupload/fileinfolist.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("bulkfileupload/fileinfolist.tpl.html",'<p ng-repeat="fileInfo in fileInfoList.files"\n        class="django-cradmin-bulkfileupload-progress-item"\n        ng-class="{\n            \'django-cradmin-bulkfileupload-progress-item-finished\': fileInfoList.finished,\n            \'django-cradmin-bulkfileupload-progress-item-error django-cradmin-bulkfileupload-errorparagraph\': fileInfoList.hasErrors\n        }">\n    <span ng-if="fileInfoList.hasErrors">\n        <button django-cradmin-bulkfileupload-error-close-button\n                type="button"\n                class="btn btn-link django-cradmin-bulkfileupload-error-closebutton">\n            <span class="fa fa-times"></span>\n            <span class="sr-only">Close</span>\n        </button>\n        <span ng-repeat="(errorfield,errors) in fileInfoList.errors">\n            <span ng-repeat="error in errors" class="django-cradmin-bulkfileupload-error">\n                {{ error.message }}\n            </span>\n        </span>\n    </span>\n    <span ng-if="!fileInfoList.hasErrors">\n        <button django-cradmin-bulkfileupload-remove-file-button="fileInfo"\n                ng-if="fileInfoList.finished"\n                type="button"\n                class="btn btn-link django-cradmin-bulkfileupload-remove-file-button">\n            <span ng-if="!fileInfo.isRemoving"\n                  class="django-cradmin-bulkfileupload-remove-file-button-isnotremoving">\n                <span class="fa fa-times"></span>\n                <span class="sr-only">Remove</span>\n            </span>\n            <span ng-if="fileInfo.isRemoving"\n                  class="django-cradmin-bulkfileupload-remove-file-button-isremoving">\n                <span class="fa fa-spinner fa-spin"></span>\n                <span class="sr-only">Removing ...</span>\n            </span>\n        </button>\n\n        <span class="django-cradmin-progressbar">\n            <span class="django-cradmin-progressbar-progress" ng-style="{\'width\': fileInfoList.percent+\'%\'}">&nbsp;</span>\n            <span class="django-cradmin-progresspercent">\n                <span class="django-cradmin-progresspercent-number">{{ fileInfoList.percent }}</span>%\n            </span>\n        </span>\n        <span class="django-cradmin-filename">{{fileInfo.name}}</span>\n    </span>\n</p>\n')}]),angular.module("bulkfileupload/progress.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("bulkfileupload/progress.tpl.html",'<div class="django-cradmin-bulkfileupload-progress">\n    <div ng-repeat="fileInfoList in fileInfoLists">\n        <div django-cradmin-bulk-file-info-list="fileInfoList"\n             class="django-cradmin-bulkfileupload-progress-fileinfolist"></div>\n    </div>\n</div>\n')}]),angular.module("bulkfileupload/rejectedfiles.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("bulkfileupload/rejectedfiles.tpl.html",'<div class="django-cradmin-bulkfileupload-rejectedfiles">\n    <p ng-repeat="rejectedFile in rejectedFiles"\n            class="django-cradmin-bulkfileupload-rejectedfile django-cradmin-bulkfileupload-errorparagraph">\n        <button ng-click="closeMessage(rejectedFile)"\n                type="button"\n                class="btn btn-link django-cradmin-bulkfileupload-error-closebutton">\n            <span class="fa fa-times"></span>\n            <span class="sr-only">Close</span>\n        </button>\n        <span class="django-cradmin-bulkfileupload-rejectedfile-filename">{{ rejectedFile.name }}:</span>\n        <span class="django-cradmin-bulkfileupload-rejectedfile-errormessage">{{ rejectedFileErrorMessage }}</span>\n    </p>\n</div>\n')}]),angular.module("pagepreview/navbar.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("pagepreview/navbar.tpl.html",'<nav django-cradmin-menu class="django-cradmin-menu">\n    <div class="django-cradmin-menu-mobileheader">\n        <a href="#" role="button"\n           class="django-cradmin-menu-mobiletoggle"\n           ng-click="cradminMenuTogglePressed()"\n           ng-class="{\'django-cradmin-menu-mobile-toggle-button-expanded\': cradminMenuDisplay}"\n           aria-pressed="{{ getAriaPressed() }}">\n                {{ mobileMenuHeader }}\n        </a>\n    </div>\n    <div class="django-cradmin-menu-content"\n             ng-class="{\'django-cradmin-menu-content-display\': cradminMenuDisplay}">\n        <ul class="django-cradmin-menu-content-main">\n            <li ng-repeat="urlConfig in previewConfig.urls" class="{{urlConfig.css_classes}}"\n                    ng-class="{\n                        \'django-cradmin-menu-activeitem\': $index == activeIndex\n                    }">\n                <a href="{{ urlConfig.url }}"\n                        django-cradmin-menu-close-on-click\n                        ng-click="onNavlinkClick($event, $index)">\n                    {{urlConfig.label}}\n                </a>\n            </li>\n        </ul>\n        <ul class="django-cradmin-menu-content-footer">\n            <li>\n                <a href="{{ activeUrlConfig.url }}" target="_blank">\n                    {{ activeUrlConfig.open_label }}\n                </a>\n            </li>\n        </ul>\n    </div>\n</nav>\n')}]),function(){angular.module("djangoCradmin.wysihtml",[]).directive("djangoCradminWysihtml",function(){return{restrict:"A",transclude:!0,template:"<div><p>Stuff is awesome!</p><div ng-transclude></div></div>"}})}.call(this);
//# sourceMappingURL=cradmin.min.js.map